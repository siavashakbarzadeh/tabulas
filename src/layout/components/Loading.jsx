import React, { useEffect, useState } from "react";

function Loading({ className = "" }) {
  const [progress, setProgress] = useState(0);

  useEffect(() => {
    // Animate progress from 0 to 100
    const interval = setInterval(() => {
      setProgress((prev) => {
        if (prev >= 100) {
          clearInterval(interval);
          return 100;
        }
        // Slow down as we approach 100
        const increment = prev < 70 ? 5 : prev < 90 ? 2 : 1;
        return Math.min(prev + increment, 100);
      });
    }, 100);

    return () => clearInterval(interval);
  }, []);

  return (
    <div 
      className={`fixed inset-0 z-50 flex flex-col items-center justify-center bg-[#97002D] ${className}`}
      role="status"
      aria-live="polite"
    >
      {/* Senato Logo - White version */}
      <div className="mb-8">
        <svg 
          width="120" 
          height="120" 
          viewBox="0 0 800 800" 
          fill="white"
          className="drop-shadow-lg"
          aria-hidden="true"
        >
          <path d="m498.889,798.925c-25.093-1.948-43.801-4.778-66.173-10.01-10.753-2.515-34.215-7.513-52.136-11.107-18.115-3.633-57.085-12.719-87.755-20.46-81.182-20.491-99.439-23.929-131.979-24.854-17.328-.493-37.401.671-40.103,2.325-.363.222.209,2.206,1.271,4.409,4.272,8.861,3.416,17.157-2.463,23.867-8.946,10.211-25.557,9.544-31.126-1.249-2.561-4.964-3.343-15.913-1.585-22.205,3.731-13.356,17.78-22.161,41.637-26.097,8.431-1.391,15.311-1.555,44.561-1.066,19.025.318,35.793.863,37.263,1.21,2.599.614,2.695.47,3.509-5.247,1.305-9.17.962-44.081-.517-52.602-2.952-17.008-10.695-42.424-14.522-47.67-1.262-1.729-2.178-1.381-15.292,5.813-32.375,17.761-73.226,27.947-106.191,26.48-27.25-1.213-46.442-9.966-60.578-27.627-19.626-24.522-22.287-62.552-6.257-89.436,10.563-17.716,25.036-29.417,43.775-35.391,10.616-3.385,32.073-3.894,48.126-1.142,30.931,5.303,60.75,16.567,114.03,43.074l40.838,20.317,28.343-29.654c15.589-16.31,28.446-29.97,28.573-30.356.127-.386-6.811-4.319-15.416-8.74-29.439-15.125-61.787-35.809-85.076-54.401-15.093-12.049-39.532-36.781-49.272-49.862-24.881-33.416-35.583-65.176-34.109-101.218,1.435-35.066,14.01-66.818,40.521-102.313,10.249-13.722,31.739-36.164,30.959-32.33-.281,1.382-1.028,8.164-1.66,15.072-3.715,40.615,8.743,81.596,35.942,118.23,8.471,11.409,32.798,35.892,46.217,46.514,29.434,23.297,65.345,43.537,105.047,59.205l5.203,2.053,4.582-6.434c5.452-7.657,6.316-9.565,4.331-9.565-5.833,0-65.854-34.49-91.508-52.583-42.986-30.317-72.783-64.436-85.267-97.634-11.527-30.653-6.794-85.118,10.565-121.566,10.156-21.325,31.363-45.549,51.642-58.986,50.528-33.483,122.182-44.1,195.01-28.895,31.154,6.504,64.016,19.537,85.743,34.003,15.355,10.224,54.125,43.918,58.722,51.033,1.396,2.16,1.584,2.058,12.446-6.741,18.637-15.098,38.174-25.769,55.146-30.119,29.907-7.665,66.831,5.96,88.265,32.571,12.043,14.952,17.49,30.395,17.503,49.625,0,5.694-.7,13.606-1.563,17.584-2.146,9.883-10.954,27.442-19.252,38.378-31.975,42.143-73.893,39.006-117.75-8.811-20.058-21.87-28.925-30.167-36.455-34.113-3.898-2.043-8.861-3.993-11.029-4.334l-3.942-.62-46.622,54.534c-25.642,29.994-47.4,55.519-48.351,56.722l-1.728,2.187,12.256,4.238c38.037,13.154,84.021,33.937,113.521,51.309,47.901,28.207,91.357,63.347,110.937,89.708,14.682,19.766,32.831,62.212,36.483,85.326,2.499,15.815,3.017,43.954,1.079,58.677-5.786,43.958-30.025,104.683-58.508,146.575-41.974,61.734-96.55,96.957-162.655,104.976-11.45,1.389-45.675,1.096-67.202-.575Zm62.664-23.355c44.188-6.796,74.807-21.078,100.288-46.779,22.066-22.256,32.697-42.614,39.146-74.961,6.152-30.856,1.876-59.752-13.605-91.939-33.076-68.771-113.906-129.86-238.106-179.952-9.917-4-18.357-7.07-18.756-6.823-.972.602-11.99,16.664-11.626,16.948.157.123,5.7,2.147,12.318,4.498,52.947,18.815,108.335,46.131,149.892,73.924,23.97,16.03,37.414,26.853,54.215,43.642,33.302,33.279,49.146,65.292,49.251,99.51.103,33.336-13.932,64.427-44.479,98.538-7.972,8.902-23.755,23.808-32.868,31.041l-4.26,3.381,2.672-5.284c6.591-13.034,8.436-32.417,4.559-47.886-5.809-23.178-25.716-50.444-54.656-74.861-42.933-36.222-110.134-73.725-190.935-106.554l-19.487-7.917-2.571,2.351c-1.414,1.293-16.557,14.926-33.652,30.295-17.095,15.369-32.613,29.423-34.485,31.23l-3.404,3.286,10.205,11.254c34.028,37.527,55.79,76.849,66.29,119.78,2.72,11.121,4.153,20.858,5.801,39.428l.711,8.01,11.53,3.351c42.999,12.495,86.297,21.017,123.323,24.272,17.381,1.528,57.57.542,72.69-1.784Zm-232.407-46.275c-2.768-69.924-44.805-134.942-114.195-176.625-11.973-7.192-26.976-15.356-28.265-15.38-.489-.009,1.112,2.131,3.558,4.756,25.228,27.075,41.462,84.024,46.042,161.522.621,10.5,1.289,19.262,1.486,19.471.719.763,24.003,5.978,24.494,5.485.278-.28.486-11.209.463-24.287-.036-19.881-.4-25.755-2.217-35.837-4.401-24.415-12.238-48.341-22.654-69.165l-5.283-10.561,3.568,1.844c15.431,7.973,32.89,25.246,44.188,43.72,15.316,25.043,26.055,64.446,26.055,95.604v9.32l4.261,1.107c2.344.609,7.194,1.922,10.778,2.918,3.584.996,6.919,1.58,7.41,1.297.5-.287.637-6.973.312-15.188Zm-40.907-2.566c8.583-4.448,8.272-17.964-.51-22.141-4.046-1.924-6.768-1.924-10.814,0-8.671,4.123-9.105,17.523-.716,22.092,3.404,1.854,8.515,1.875,12.039.048Zm351.793-40.243c4.088-7.38,10.016-20.892,12.615-28.752,5.725-17.319,6.935-42.953,2.814-59.615-6.714-27.147-20.85-50.468-45.749-75.478-27.305-27.427-63.284-51.976-110.279-75.247-30.035-14.873-69.52-31.005-97.296-39.752-7.265-2.288-32.859-12.673-45.619-18.51-33.596-15.369-67.265-35.82-93.244-56.636-12.274-9.835-32.509-29.621-40.794-39.89-20.199-25.034-33.738-53.355-37.95-79.379-2.87-17.734-2.358-17.056-7.148-9.454-9.787,15.53-17.501,33.96-20.99,50.149-2.495,11.575-2.55,34.467-.11,45.911,10.531,49.399,48.968,95.652,116.622,140.334,29.533,19.505,68.475,39.878,100.15,52.394,90.931,35.931,163.648,76.661,210.095,117.679,30.788,27.189,48.987,57.681,49.106,82.277l.029,6.029,1.927-2.512c1.06-1.382,3.68-5.677,5.823-9.546Zm-4.7-43.061c-.135-4.495-2.98-14.506-6.05-21.293-9.511-21.02-34.684-46.429-66.755-67.379-36.105-23.586-91.275-49.101-144.955-67.039-17.357-5.8-33.505-12.946-63.06-27.905-60.826-30.786-106.078-62.155-137.912-95.601-14.062-14.774-23.006-27.215-30.531-42.464-8.946-18.13-10.538-24.773-10.471-43.709.05-14.254.291-16.287,2.838-23.984,1.531-4.625,3.127-8.016,3.547-7.536.42.48,2.004,4.49,3.52,8.911,3.846,11.216,12.208,27.707,19.989,39.42,38.418,57.833,120.198,112.9,219.277,147.598,38.275,13.415,66.382,25.45,92.738,39.71,68.102,36.846,107.094,76.574,118.083,120.312,1.773,7.056,2.156,11.356,2.069,23.228-.058,8.013-.57,15.926-1.137,17.584l-1.031,3.014Zm-14.661-56.876c3.757-4.161-1.407-10.8-6.342-8.153-4.769,2.558-3,10.122,2.368,10.122,1.208,0,2.996-.886,3.974-1.969Zm-24.507-32.234c2.833-5.305-.792-12.018-6.49-12.018-6.064,0-9.67,5.009-7.577,10.526,2.031,5.353,11.471,6.354,14.067,1.492Zm-35.364-23.595c4.366-5.035,2.208-13.088-4.158-15.513-7.595-2.894-15.532,6.729-11.609,14.075,2.854,5.343,11.682,6.149,15.766,1.438Zm-41.782-22.509c3.841-3.85,3.967-8.737.335-13.063-5.468-6.513-16.454-2.204-16.454,6.454,0,2.718.761,4.434,2.931,6.608,2.17,2.174,3.882,2.937,6.594,2.937,2.712,0,4.424-.763,6.594-2.937Zm-47.94-17.87c3.485-3.109,5.014-8.003,3.725-11.92-3.782-11.484-20.94-9.116-21.01,2.9-.028,4.867,1.293,7.316,5.306,9.833,3.728,2.338,8.836,1.992,11.98-.812Zm-46.673-18.346c5.711-3.49,6.086-11.763.774-17.087-1.971-1.975-3.554-2.541-7.107-2.541-3.896,0-5.003.485-7.497,3.281-2.269,2.545-2.921,4.236-2.903,7.536.047,8.982,8.859,13.622,16.733,8.811Zm-47.235-22.542c3.607-3.615,4.314-7.13,2.431-12.092-1.135-2.991-6.509-6.588-9.85-6.593-3.577-.006-8.033,2.744-9.709,5.992-2.044,3.961-1.91,6.918.494,10.869,3.821,6.28,11.362,7.107,16.633,1.824Zm-43.213-20.837c2.478-2.401,3.008-3.723,3.008-7.499,0-3.909-.483-5.017-3.274-7.517-7.294-6.532-18.291-1.837-18.278,7.804.01,4.306,3.428,9.142,7.227,10.211,4.551,1.281,7.786.424,11.318-2.999Zm-43.298-22.085c10.985-5.63,3.916-23.452-7.566-19.077-6.337,2.415-8.977,10.59-5.176,16.028,2.71,3.877,8.447,5.249,12.742,3.048Zm-36.473-26.838c3.685-1.98,7.08-7.26,7.08-11.009,0-3.227-2.464-7.681-5.63-10.176-3.188-2.513-9.215-2.77-13.453-.574-8.364,4.335-7.542,18.251,1.306,22.106,4.367,1.902,6.651,1.828,10.697-.346Zm-30.473-34.793c1.354-1.356,2.461-3.638,2.461-5.07,0-3.001-4.062-7.536-6.75-7.536-2.519,0-6.266,2.79-7.221,5.378-1.648,4.463,2.094,9.432,7.249,9.626.99.037,2.908-1.042,4.261-2.398Zm-24.86-38.005c3.095-2.4-.023-8.764-4.294-8.764-4.536,0-6.375,5.225-3.021,8.586,2.411,2.417,4.366,2.464,7.315.178Zm87.228,376.522c3.185-3.627,2.932-7.963-.675-11.578-5.041-5.052-13.103-2.804-14.61,4.073-1.964,8.962,9.195,14.44,15.285,7.505Zm-13.355-39.839c1.317-1.884,1.345-2.521.193-4.27-1.939-2.942-5.134-3.115-7.044-.383-1.986,2.842-1.989,3.321-.025,5.288,2.219,2.224,5.062,1.961,6.877-.635Zm461.631-18.635c15.56-31.203,22.704-60.89,22.547-93.698-.101-21.098-2.357-35.493-8.406-53.622-16.18-48.497-56.508-94.547-120.504-137.6-43.997-29.599-68.718-41.3-150.01-71.005-18.389-6.72-41.399-15.386-51.134-19.259-22.062-8.778-56.164-25.509-71.211-34.939-34.946-21.9-63.638-50.053-80.645-79.132-6.332-10.827-9.011-18.493-9.125-26.113-.068-4.577-.396-5.935-1.26-5.224-2.176,1.792-13.287,25.426-16.229,34.52-9.705,29.994-7.785,59.505,5.623,86.413,27.316,54.817,102.066,104.757,204.277,136.476,83.612,25.947,148.917,63.204,196.018,111.828,6.896,7.119,15.621,16.787,19.389,21.485,32.17,40.108,54.349,92.826,55.125,131.033.096,4.747.284,8.631.417,8.632.133,0,2.44-4.407,5.127-9.795Zm-6.301-78.935c-6.342-19.694-23.505-49.957-40.286-71.031-9.647-12.116-37.034-39.157-49.864-49.235-34.74-27.289-71.426-48.13-116.962-66.446-12.195-4.905-36.719-13.245-68.178-23.184-16.99-5.368-51.04-20.052-72.816-31.403-64.458-33.599-103.142-74.47-112.054-118.39-1.989-9.802-2.973-27.765-1.884-34.384l.827-5.024,3.713,9.546c12.37,31.801,36.686,59.208,71.552,80.647,21.48,13.208,46.27,24.117,121.69,53.553,83.662,32.652,112.003,45.306,148.335,66.227,60.774,34.997,96.751,75.205,112.73,125.991,5.911,18.787,6.762,25.102,6.706,49.785-.027,12.106-.167,22.115-.311,22.243-.144.128-1.584-3.874-3.2-8.893Zm-12.537-53.985c2.901-1.556,2.572-6.536-.567-8.598-2.322-1.525-2.691-1.525-5.013,0-2.891,1.898-3.244,5.147-.847,7.8,1.883,2.085,3.624,2.301,6.428.797Zm-21.193-34.089c.991-.532,2.369-2.338,3.061-4.013,3.283-7.943-9.32-13.3-12.878-5.473-1.677,3.688-1.42,5.241,1.32,7.987,2.591,2.597,5.495,3.11,8.496,1.5Zm-32.995-34.714c5.847-3.03,6.812-9.877,2.062-14.636-8.428-8.446-21.086,3.506-13.243,12.505,3.195,3.666,6.869,4.366,11.181,2.132Zm-37.143-30.118c2.293-1.42,4.208-6.822,3.589-10.125-1.312-7.009-10.949-10.986-16.23-6.699-4.686,3.804-5.552,8.839-2.408,14.006,2.844,4.675,9.913,5.999,15.048,2.818Zm-45.802-24.649c6.015-4.741,5.298-14.151-1.339-17.59-11.388-5.902-21.052,11.122-10.158,17.895,3.643,2.265,8.397,2.139,11.497-.305Zm-45.278-24.73c3.406-3.27,4.281-6.655,2.846-11.01-1.446-4.39-5.383-7.451-9.585-7.451-7.05,0-11.442,4.33-11.442,11.282,0,9.271,11.339,13.748,18.181,7.179Zm-48.66-17.858c2.747-2.753,3.409-4.201,3.409-7.459,0-11.794-16.198-15.303-20.707-4.486-3.129,7.505,2.25,15.348,10.531,15.358,2.486,0,4.245-.884,6.768-3.413Zm-47.474-17.638c4.109-4.608,3.862-10.193-.652-14.716-2.523-2.529-4.282-3.415-6.768-3.413-8.251.009-13.842,8.111-10.487,15.197,3.559,7.517,12.511,8.983,17.906,2.932Zm-43.245-18.742c4.162-3.775,3.216-12.7-1.689-15.92-8.985-5.9-20.251,5.113-14.558,14.231,3.287,5.264,11.378,6.105,16.247,1.69Zm-35.417-16.954c6.151-5.187,6.648-13.005,1.175-18.489-7.53-7.547-19.565-3.322-20.758,7.287-.577,5.132,2.024,10.546,5.986,12.46,4.209,2.033,10.37,1.464,13.597-1.257Zm-38.967-29.624c2.771-1.486,4.493-6.435,3.128-8.99-2.838-5.315-9.474-6.242-12.605-1.762-2.168,3.102-1.813,6.454.98,9.253,2.592,2.597,5.495,3.11,8.496,1.5Zm-25.825-28.831c2.596-2.354,2.308-6.018-.624-7.943-3-1.97-6.191-1.142-7.213,1.87-.999,2.946-.561,4.958,1.409,6.48,2.209,1.706,4.239,1.578,6.428-.407ZM106.864,611.251c11.922-2.608,31.182-8.865,60.659-19.705,22.855-8.405,21.061-7.116,18.09-12.99-5.895-11.658-27.552-36.522-41.151-47.243-19.103-15.062-37.706-21.116-60.964-19.842-14.06.771-21.974,2.674-32.679,7.859-9.16,4.437-16.621,11.002-19.962,17.566-4.824,9.477-6.71,18.351-6.71,31.58,0,12.531.024,12.662,3.728,20.172,6.236,12.644,15.923,20.581,29.86,24.464,8.547,2.382,34.173,1.411,49.128-1.861Zm385.509-569.776c18.623-20.764,35.525-43.128,41.503-54.911l2.18-4.298-2.056-4.657c-2.629-5.957-18.12-30.209-28.972-45.357-22.883-31.943-47.78-54.224-76.823-68.752-20.874-10.442-37.038-14.274-60.157-14.264-18.037.008-27.394,1.843-39.604,7.767-8.902,4.319-19.703,15.119-23.837,23.835-4.427,9.334-8.31,23.358-8.968,32.385l-.566,7.769,5.145,10.318c6.695,13.426,13.053,21.89,26.651,35.474,17.415,17.397,34.553,29.388,71.759,50.206,45.489,25.452,67.6,35.454,78.706,35.599l5.013.066,10.026-11.179Zm245.617-41.247c25.781-6.628,42.273-36.451,36.156-65.38-6.045-28.588-27.854-43.197-62.198-41.665-22.135.987-30.143,3.838-55.739,19.842-8.826,5.518-23.168,16.342-26.305,19.851-2.065,2.311-3.191,1.336,25.283,21.891,6.831,4.931,18.693,14.948,26.361,22.26,18.295,17.446,25.218,22.108,36.185,24.366,4.679.963,14.085.423,20.258-1.164Zm-23.366-25.462c-8.324-4.211-19.054-13.702-22.873-20.232-3.938-6.734-2.37-6.967,2.85-.424,10.559,13.237,23.853,14.556,31.609,3.137,3.518-5.179,3.854-9.283,1.21-14.757-6.638-13.742-18.629-18.566-40.892-16.45-5.871.558-13.138,1.015-16.147,1.015l-5.472,0,8.981-5.166c9.669-5.561,18.989-9.139,29.852-11.46,9.349-1.998,16.318-1.832,24.087.572,16.587,5.134,27.556,24.557,24.584,43.532-2.219,14.173-10.804,22.454-24.346,23.485-5.51.419-6.796.108-13.442-3.254Zm-149.327-20.506l3.743-3.462-4.401-8.291c-10.69-20.138-27.574-42.256-51.983-68.097l-13.188-13.962,4.763.716c20.469,3.076,47.158,20.693,76.451,50.462l13.111,13.324,6.19-6.259c3.404-3.442,6.19-6.74,6.19-7.329,0-1.693-20.784-21.447-29.076-27.636-35.749-26.681-88.69-44.927-131.845-45.44-21.125-.251-23.814,1.833-8.944,6.931,21.2,7.268,39.494,19.454,60.19,40.092,19.455,19.401,35.483,40.616,51.511,68.181l6.314,10.86,3.617-3.314c1.989-1.823,5.301-4.872,7.359-6.776Zm9.721-21.64c4.604-2.386,5.384-6.648,2.004-10.954-4.098-5.221-12.961-1.917-12.961,4.832,0,2.519,1.641,4.859,4.512,6.432,2.637,1.445,3.102,1.423,6.445-.31Zm-18.723-24.906c2.807-2.149,3.208-6.327.835-8.705-3.867-3.875-10.113-1.554-10.113,3.758,0,5.042,5.396,7.92,9.278,4.947Z" />
        </svg>
      </div>

      {/* Progress bar */}
      <div className="w-64 mb-4">
        <div className="h-2 bg-white/20 rounded-full overflow-hidden">
          <div 
            className="h-full bg-white rounded-full transition-all duration-200 ease-out"
            style={{ width: `${progress}%` }}
            role="progressbar"
            aria-valuenow={progress}
            aria-valuemin={0}
            aria-valuemax={100}
          />
        </div>
        <div className="text-center text-white/80 text-sm mt-2">
          {progress}%
        </div>
      </div>

      {/* Loading message */}
      <p className="text-white text-center text-sm max-w-xs opacity-80">
        Stiamo raccogliendo i dati, potrebbe richiedere qualche secondo...
      </p>
      
      <span className="sr-only">Caricamento in corso...</span>
    </div>
  );
}

export default Loading;
